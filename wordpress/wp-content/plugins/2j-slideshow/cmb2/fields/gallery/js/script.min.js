!function(e){function t(e){var t=jQuery(i),o={action:"twoj_slideshow_get_images_from_ids",idstring:e};jQuery.post(ajaxurl,o,function(e){t.html(e)})}var o,l="gallery-library",i=document.getElementById("twoj_slideshow_image_view"),a=document.getElementById("twoj_slides"),n=document.getElementById("twojs_slideshowImages"),s=n.value,d=""==s?[]:s.split(",");console.log("imagesIds",s),t(s);var r=function(e,i){e.preventDefault(),o?o.open():(d.length>0&&(l="gallery-edit"),(o=new wp.media.view.emWpGallery({multiple:!0,state:l,library:{order:"ASC",orderby:"title",type:"image",search:null,uploadedTo:null,multiple:!0}})).on("ready",function(){if(0!=d.length){var e=o.state().get("library");wp.media.query({post__in:d}).more().then();d.forEach(function(t){var o=wp.media.attachment(t);e.add(o)})}}),o.on("open",function(){0!=d.length&&"gallery-edit"!=l&&(o.setState("gallery-edit"),o.options.state="gallery-edit",l="gallery-edit")}),o.on("insert",function(){var e=o.state().get("selection");console.log(e)}),o.on("update",function(e){var l,i=o.state();if(l=e||i.get("selection")){var a=l.toJSON();if(0!=a.length){d=[];for(var r=0;r<a.length;r++)d.push(a[r].id);t(s=d.join(",")),n.value=s}}else console.log("return selection")}),o.open())};a.addEventListener("click",r),e("#twoj_slideshow_image_view").click(function(){e("#twoj_slides").click()}),e(".2j_slideshow_open_media").click();var c=jQuery("#twoj_showShortCodeDialog");c.dialog({dialogClass:"wp-dialog",title:c.data("title"),modal:!0,autoOpen:c.data("open"),width:"350",maxWidth:350,height:"auto",fluid:!0,resizable:!1,responsive:!0,draggable:!1,closeOnEscape:!0,buttons:[{text:c.data("close"),class:"button button-default twoj_dialog_close",click:function(){jQuery(this).dialog("close")}}],open:function(e,t){}}),window.twojShortCodeDialog=c,e("#twoj_2jslideshow_getshortcode").click(function(e){e.preventDefault(),c.dialog("open")})}(jQuery);